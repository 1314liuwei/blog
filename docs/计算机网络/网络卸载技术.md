# 网络卸载技术

网络卸载（Offload）技术指的是在操作系统中将数据包的处理尽量向下层移动，避免 CPU 消耗大量的计算资源用于处理网络包。

网络卸载技术当前主要应用于三个层面：**硬件层面**、**驱动层面**和**操作系统层面**。

## 硬件层面

### TSO / UFO

TSP 全称 （TCP 分段卸载技术， TCP Segmentation Offload）；UFO 全称（UDP 分片卸载技术，UDP Fragmentation Offload）。

开启 TSO 能力后，OS 可将一个不超过 64K 字节（包含 TCP 头部）的任意大小的TCP报文传给网卡，由网卡执行TCP分段、Checksum 计算和包头、帧头生成以及封装等工作，这样就消除了 TCP 分段工作带给 CPU 的负担。被 TCP 分段后的每个 TCP Segment，都需要封装 TCP 头，TCP 头部中有 Checksum（校验和），因此TSO通常需要 Checksum Offload 支持，即由网卡同时完成TCP校验工作。

工作流程如图所示：

![image-20231121125755959](http://blog-img-figure.oss-cn-chengdu.aliyuncs.com/img/2023/11/21/20231121-125801.png)



### RSC

RSC 全称（Receive Side Coalescing (RSC)    or hardware LRO）